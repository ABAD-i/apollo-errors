{"version":3,"sources":["../src/index.js"],"names":["ApolloError","name","message","time_thrown","Date","toISOString","data","options","t","arguments","d","Object","assign","m","opts","_showLocations","showLocations","path","locations","error","isInstance","e","createError","bind","formatError","returnNull","originalError","serialize"],"mappings":"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","file":"index.js","sourcesContent":["import ExtendableError from 'es6-error';\n\nclass ApolloError extends ExtendableError {\n  constructor (name, {\n    message,\n    time_thrown = (new Date()).toISOString(),\n    data = {},\n    options = {},\n  }) {\n    const t = (arguments[2] && arguments[2].time_thrown) || time_thrown;\n    const d = Object.assign({}, data, ((arguments[2] && arguments[2].data) || {}));\n    const m = (arguments[2] && arguments[2].message) || message;\n    const opts = Object.assign({}, options, ((arguments[2] && arguments[2].options) || {}));\n\n    super(m);\n\n    this.name = name;\n    this.message = m;\n    this.time_thrown = t;\n    this.data = d;\n    this._showLocations = !!opts.showLocations;\n  }\n  serialize () {\n    const { name, message, time_thrown, data, _showLocations, path, locations } = this;\n\n    let error = {\n      message,\n      name,\n      time_thrown,\n      data,\n    };\n\n    if (_showLocations) {\n      error.locations = locations;\n      error.path = path;\n    }\n\n    return error;\n  }\n}\n\nexport const isInstance = e => e instanceof ApolloError;\n\nexport const createError = (name, data = { message: 'An error has occurred', options }) => {\n  const e = ApolloError.bind(null, name, data);\n  return e;\n};\n\nexport const formatError = (error, returnNull = false) => {\n  const originalError = error ? error.originalError || error : null;\n\n  if (!originalError) return returnNull ? null : error;\n\n  const { name } = originalError;\n\n  if (!name || !isInstance(originalError)) return returnNull ? null : error;\n\n  const { time_thrown, message, data, _showLocations } = originalError;\n\n  if (_showLocations) {\n    const { locations, path } = error;\n    originalError.locations = locations;\n    originalError.path = path;\n  }\n\n  return originalError.serialize();\n};\n"]}